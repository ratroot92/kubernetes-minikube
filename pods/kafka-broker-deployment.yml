
# https://www.magalix.com/blog/kafka-on-kubernetes-and-deploying-best-practice


apiVersion: v1
kind: Pod
metadata:
  name: kafka
  labels:
    app: kafka
    id: "0"
spec:
  containers:
  - name: kafka 
    image:  wurstmeister/kafka 
    # resources:
    #   limits:
    #     memory: "128Mi"
    #     cpu: "500m"
    ports: 
    - containerPort: 9092
    env:
    # - name: ENABLE_AUTO_EXTEND
    #   value: "true"
    # - name: KAFKA_RESERVED_BROKER_MAX_ID
    #   value: "999999999"
    # - name: KAFKA_AUTO_CREATE_TOPICS_ENABLE
    #   value: "true"
    # - name: KAFKA_PORT
    #   value: "9092"
    # - name: KAFKA_ADVERTISED_PORT
    #   value: "9092"
    # - name: KAFKA_ADVERTISED_HOST_NAME
    #   # value: "kafka"
    #   valueFrom:
    #           fieldRef:
    #             fieldPath: metadata.name
    # - name: KAFKA_ZOOKEEPER_CONNECT
    #   value: "zookeeper:3052"
    - name: KAFKA_ADVERTISED_PORT
      value: "3051"
      # value: "30718" 
    - name: KAFKA_ADVERTISED_HOST_NAME
      # value: 192.168.49.2
      valueFrom:
              fieldRef:
                fieldPath: metadata.name
    - name: KAFKA_ZOOKEEPER_CONNECT
      value: zookeeper:3052
    - name: KAFKA_BROKER_ID
      value: "0"
    - name: KAFKA_CREATE_TOPICS
      value: admintome-test:1:1
